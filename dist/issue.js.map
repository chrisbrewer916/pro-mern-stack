{"version":3,"sources":["../server/issue.js"],"names":["validIssueStatus","New","Open","Assigned","Fixed","Verified","Closed","issueFieldType","status","owner","effort","created","completionDate","title","convertIssue","issue","Date","cleanupIssue","cleanedUpIssue","Object","keys","forEach","field","validateIssue","errors","push","length","join"],"mappings":";;;;;AAAA,MAAMA,mBAAmB;AACvBC,OAAK,IADkB;AAEvBC,QAAM,IAFiB;AAGvBC,YAAU,IAHa;AAIvBC,SAAO,IAJgB;AAKvBC,YAAU,IALa;AAMvBC,UAAQ;AANe,CAAzB;;AASA,MAAMC,iBAAiB;AACrBC,UAAQ,UADa;AAErBC,SAAO,UAFc;AAGrBC,UAAQ,UAHa;AAIrBC,WAAS,UAJY;AAKrBC,kBAAgB,UALK;AAMrBC,SAAO;AANc,CAAvB;;AASA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAIA,MAAMJ,OAAV,EAAmBI,MAAMJ,OAAN,GAAgB,IAAIK,IAAJ,CAASD,MAAMJ,OAAf,CAAhB;AACnB,MAAII,MAAMH,cAAV,EAA0BG,MAAMH,cAAN,GAAuB,IAAII,IAAJ,CAASD,MAAMH,cAAf,CAAvB;AAC1B,SAAOK,aAAaF,KAAb,CAAP;AACD;;AAED,SAASE,YAAT,CAAsBF,KAAtB,EAA6B;AAC3B,QAAMG,iBAAiB,EAAvB;AACAC,SAAOC,IAAP,CAAYL,KAAZ,EAAmBM,OAAnB,CAA4BC,KAAD,IAAW;AACpC,QAAIf,eAAee,KAAf,CAAJ,EAA2BJ,eAAeI,KAAf,IAAwBP,MAAMO,KAAN,CAAxB;AAC5B,GAFD;AAGA,SAAOJ,cAAP;AACD;;AAED,SAASK,aAAT,CAAuBR,KAAvB,EAA8B;AAC5B,QAAMS,SAAS,EAAf;AACAL,SAAOC,IAAP,CAAYb,cAAZ,EAA4Bc,OAA5B,CAAqCC,KAAD,IAAW;AAC7C,QAAIf,eAAee,KAAf,MAA0B,UAA1B,IAAwC,CAACP,MAAMO,KAAN,CAA7C,EAA2D;AACzDE,aAAOC,IAAP,CAAa,4BAA2BH,KAAM,EAA9C;AACD;AACF,GAJD;;AAMA,MAAI,CAACtB,iBAAiBe,MAAMP,MAAvB,CAAL,EAAqC;AACnCgB,WAAOC,IAAP,CAAa,GAAEV,MAAMP,MAAO,yBAA5B;AACD;;AAED,SAAQgB,OAAOE,MAAP,GAAgBF,OAAOG,IAAP,CAAY,IAAZ,CAAhB,GAAoC,IAA5C;AACD;;kBAEc;AACbJ,eADa;AAEbN,cAFa;AAGbH;AAHa,C","file":"issue.js","sourcesContent":["const validIssueStatus = {\n  New: true,\n  Open: true,\n  Assigned: true,\n  Fixed: true,\n  Verified: true,\n  Closed: true,\n};\n\nconst issueFieldType = {\n  status: 'required',\n  owner: 'required',\n  effort: 'optional',\n  created: 'required',\n  completionDate: 'optional',\n  title: 'required',\n};\n\nfunction convertIssue(issue) {\n  if (issue.created) issue.created = new Date(issue.created);\n  if (issue.completionDate) issue.completionDate = new Date(issue.completionDate);\n  return cleanupIssue(issue);\n}\n\nfunction cleanupIssue(issue) {\n  const cleanedUpIssue = {};\n  Object.keys(issue).forEach((field) => {\n    if (issueFieldType[field]) cleanedUpIssue[field] = issue[field];\n  });\n  return cleanedUpIssue;\n}\n\nfunction validateIssue(issue) {\n  const errors = [];\n  Object.keys(issueFieldType).forEach((field) => {\n    if (issueFieldType[field] === 'required' && !issue[field]) {\n      errors.push(`Missing mandatory field: ${field}`);\n    }\n  });\n\n  if (!validIssueStatus[issue.status]) {\n    errors.push(`${issue.status} is not a valid status.`);\n  }\n\n  return (errors.length ? errors.join('; ') : null);\n}\n\nexport default {\n  validateIssue,\n  cleanupIssue,\n  convertIssue,\n};\n"]}